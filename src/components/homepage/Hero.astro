---
import richWithCam from "@assets/images/rich-with-cam.jpg";
import { WideContainer } from "@components/ui/WideContainer";
import { Box, Flex, panda } from "styled-system/jsx";

const initialPositionAnimation = "translateY(max(-200px, -25vw)) translateZ(0)";
---

<WideContainer>
  <Flex
    id="hero.wrapper"
    flexDirection="column"
    justifyContent="center"
    overflow="hidden"
  >
    <Box
      id="hero.text"
      paddingTop={{ base: "30vh", md: "40vh" }}
      paddingBottom={{ base: "20vh", md: "10" }}
      textAlign={{ base: "center", md: "right" }}
    >
      <panda.p fontSize="6vw" fontWeight="black" color="gray.10">
        Full Stack Developer
      </panda.p>
      <panda.p fontSize="9vw" fontWeight="black" lineHeight="0.6">
        Richard Boomsma
      </panda.p>
    </Box>
    <Box
      overflow="hidden"
      rounded="3xl"
      position="relative"
      _before={{
        content: "''",
        display: "block",
        paddingTop: "calc(min(max(50%, 60vh), 100vh))",
      }}
    >
      <panda.img
        id="hero.image"
        src={richWithCam.src}
        position="absolute"
        top="-7vw"
        objectFit="cover"
        minHeight="80vh"
        transform={initialPositionAnimation}
      />
    </Box>
  </Flex>
</WideContainer>

<script>
  import { animate, scroll } from "motion";

  let wrapper: HTMLElement = document.getElementById("hero.wrapper")!;
  let image: HTMLElement = document.getElementById("hero.image")!;
  let text: HTMLElement = document.getElementById("hero.text")!;

  scroll(
    animate(image, {
      transform: [
        "translateY(max(-200px, -25vw)) translateZ(0)",
        "translateY(min(25vh,25vw)) translateZ(0)",
      ],
    }),
    {
      target: wrapper,
      offset: [`${-wrapper.offsetTop}px`, "end start"],
    },
  );

  scroll(
    animate(text, {
      transform: [
        "translateY(0vh) translateZ(0)",
        "translateY(30vw) translateZ(0)",
      ],
    }),
    {
      target: wrapper,
      offset: [`${-wrapper.offsetTop}px`, "end start"],
    },
  );
</script>
